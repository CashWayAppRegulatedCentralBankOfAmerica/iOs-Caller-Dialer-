<!DOCTYPE html>
<html lang="en" class="scroll-smooth" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Airbnb Clone Listing Detail Modal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .modal-bg {
      background-color: rgba(0, 0, 0, 0.6);
    }
    .vertical-gallery::-webkit-scrollbar {
      width: 8px;
    }
    .vertical-gallery::-webkit-scrollbar-thumb {
      background-color: rgba(0,0,0,0.3);
      border-radius: 4px;
    }
  </style>
</head>
<body class="bg-gray-100">

<!-- Listings - Example -->
<div class="p-8 max-w-5xl mx-auto">
  <h1 class="text-4xl font-bold mb-8">Listings</h1>
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    <div
      class="bg-white rounded-lg shadow cursor-pointer overflow-hidden"
      onclick="openListingDetail(1)"
      >
      <img
        src="https://images.unsplash.com/photo-1501183638714-9f3fca6e9a8c?auto=format&fit=crop&w=600&q=80"
        alt="Listing 1"
        class="w-full h-48 object-cover"
      />
      <div class="p-4">
        <h2 class="text-xl font-semibold mb-2">Cozy Apartment in Downtown</h2>
        <p class="text-red-600 font-bold">$120 / night</p>
      </div>
    </div>
  </div>
</div>

<!-- Listing Detail Modal -->
<div id="listingModal" class="fixed inset-0 z-50 hidden items-center justify-center modal-bg p-6 overflow-auto">
  <div class="bg-white rounded-lg shadow-xl max-w-5xl w-full flex flex-col md:flex-row relative">
    
    <!-- Host info top-left corner inside modal -->
    <div class="absolute top-4 left-4 flex items-center space-x-3 bg-white rounded-full p-2 shadow-md z-20">
      <img id="hostAvatar" src="" alt="Host avatar" class="w-12 h-12 rounded-full object-cover" />
      <div>
        <p id="hostCountry" class="text-sm font-semibold text-gray-700"></p>
        <p id="hostSince" class="text-xs text-gray-500"></p>
      </div>
    </div>

    <!-- Left side: info -->
    <div class="p-6 flex-1 pt-16"> <!-- Added padding top for host info -->
      <h2 id="modalTitle" class="text-3xl font-bold mb-4">Listing Title</h2>

      <p id="modalPrice" class="text-2xl font-semibold text-red-600 mb-4">$120 / night</p>

      <!-- Main image with amenities below -->
      <div>
        <img
          id="mainImage"
          src=""
          alt="Listing Image"
          class="w-full h-64 object-cover rounded-lg mb-4"
        />
        <!-- Amenities row -->
        <div
          id="amenities"
          class="flex flex-wrap gap-6 text-gray-600 text-sm"
          style="max-width: 600px;"
        >
          <!-- Insert amenities icons and text dynamically -->
        </div>
      </div>

      <p id="modalDescription" class="my-6 text-gray-700 leading-relaxed"></p>

      <!-- Reviews -->
      <div id="modalReviews" class="space-y-4 mb-6">
        <h3 class="text-xl font-semibold mb-2">Reviews</h3>
        <!-- Reviews inserted dynamically -->
      </div>

      <!-- Review submission form -->
      <form id="reviewForm" class="space-y-4">
        <h3 class="text-lg font-semibold">Add your review</h3>
        <textarea
          id="reviewText"
          rows="3"
          class="w-full border rounded p-2"
          placeholder="Write your review here..."
          required
        ></textarea>
        <button
          type="submit"
          class="bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition"
        >
          Submit Review
        </button>
      </form>
    </div>

    <!-- Right side: vertical gallery -->
    <div class="flex flex-col border-l border-gray-200 w-full md:w-96 p-4">

      <div id="galleryMain" class="h-64 mb-4 rounded-lg overflow-hidden">
        <img src="" alt="Listing Image" id="mainImageSide" class="w-full h-full object-cover rounded-lg" />
      </div>

      <div
        id="galleryThumbnails"
        class="vertical-gallery flex flex-col gap-2 overflow-y-auto"
        style="max-height: 320px;"
      >
        <!-- Thumbnails inserted dynamically -->
      </div>

      <button
        aria-label="Close modal"
        onclick="closeListingDetail()"
        class="mt-auto bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded text-center"
      >
        Close
      </button>
    </div>
  </div>
</div>

<script>
  // Sample listing data extended with amenities and host info
  const listingsData = {
    1: {
      title: "Cozy Apartment in Downtown",
      price: 120,
      description:
        "Enjoy your stay at this cozy downtown apartment with modern amenities, fast WiFi, and easy access to restaurants and nightlife.",
      images: [
        "https://images.unsplash.com/photo-1501183638714-9f3fca6e9a8c?auto=format&fit=crop&w=800&q=80",
        "https://images.unsplash.com/photo-1560448070-23eec17863e0?auto=format&fit=crop&w=800&q=80",
        "https://images.unsplash.com/photo-1549187774-b4e9b0445b70?auto=format&fit=crop&w=800&q=80",
        "https://images.unsplash.com/photo-1505692794409-54a362f7e517?auto=format&fit=crop&w=800&q=80"
      ],
      reviews: [
        { author: "Jane Doe", text: "Amazing stay! The apartment was clean and in a great location." },
        { author: "John Smith", text: "Highly recommend! Great value for the price." }
      ],
      amenities: {
        baths: 1,
        beds: 2,
        maxVisitors: 4,
        kitchen: true,
        wifi: true,
        tv: true,
        swimmingPool: false
      },
      host: {
        avatar: "https://randomuser.me/api/portraits/women/68.jpg",
        country: "Kenya",
        hostingSince: "Since 2019"
      }
    }
  };

  // Amenities icons HTML map
  const amenityIcons = {
    baths: `<svg xmlns="http://www.w3.org/2000/svg" class="inline-block w-5 h-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m2 0a6 6 0 11-12 0 6 6 0 0112 0z" />
           </svg>`,
    beds: `<svg xmlns="http://www.w3.org/2000/svg" class="inline-block w-5 h-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18v7H3v-7zM7 10V6a2 2 0 012-2h6a2 2 0 012 2v4" />
           </svg>`,
    visitors: `<svg xmlns="http://www.w3.org/2000/svg" class="inline-block w-5 h-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a4 4 0 00-4-4h-1m-6 6h6m-9-4a4 4 0 114 4m0-10a4 4 0 11-4 4m4-10v6" />
               </svg>`,
    kitchen: `<svg xmlns="http://www.w3.org/2000/svg" class="inline-block w-5 h-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2a3 3 0 00-6 0v2m6 0v2a3 3 0 006 0v-2m-6 0v-4a3 3 0 00-6 0v4m6 0v2m3-6h3m-3 4h3" />
              </svg>`,
    wifi: `<svg xmlns="http://www.w3.org/2000/svg" class="inline-block w-5 h-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.5 18a3.5 3.5 0 017 0m-7-3a7 7 0 0114 0m-14-3a10 10 0 0120 0" />
           </svg>`,
    tv: `<svg xmlns="http://www.w3.org/2000/svg" class="inline-block w-5 h-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2 12h20M5 16h14M9 20h6" />
         </svg>`,
    swimmingPool: `<svg xmlns="http://www.w3.org/2000/svg" class="inline-block w-5 h-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                     <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 16c-1.5-2-4-3-6-3s-4.5 1-6 3m0 0v1a1 1 0 001 1h10a1 1 0 001-1v-1" />
                   </svg>`
  };

  // Open modal with listing data
  function openListingDetail(id) {
    const listing = listingsData[id];
    if (!listing) return;

    // Show modal
    const modal = document.getElementById("listingModal");
    modal.style.display = "flex";

    // Populate text info
    document.getElementById("modalTitle").textContent = listing.title;
    document.getElementById("modalPrice").textContent = `$${listing.price} / night`;
    document.getElementById("modalDescription").textContent = listing.description;

    // Host info
    document.getElementById("hostAvatar").src = listing.host.avatar;
    document.getElementById("hostCountry").textContent = listing.host.country;
    document.getElementById("hostSince").textContent = listing.host.hostingSince;

    // Main image left side
    document.getElementById("mainImage").src = listing.images[0];
    document.getElementById("mainImage").alt = listing.title;

    // Main image right side (gallery main)
    const mainSideImg = document.getElementById("mainImageSide");
    mainSideImg.src = listing.images[0];
    mainSideImg.alt = listing.title;

    // Amenities
    const amenitiesDiv = document.getElementById("amenities");
    amenitiesDiv.innerHTML = ""; // Clear
    if (listing.amenities.baths !== undefined) {
      amenitiesDiv.innerHTML += `<div class="flex items-center" title="Bathrooms">${amenityIcons.baths} ${listing.amenities.baths} Bath${listing.amenities.baths > 1 ? "s" : ""}</div>`;
    }
    if (listing.amenities.beds !== undefined) {
      amenitiesDiv.innerHTML += `<div class="flex items-center" title="Beds">${amenityIcons.beds} ${listing.amenities.beds} Bed${listing.amenities.beds > 1 ? "s" : ""}</div>`;
    }
    if (listing.amenities.maxVisitors !== undefined) {
      amenitiesDiv.innerHTML += `<div class="flex items-center" title="Max Visitors">${amenityIcons.visitors} ${listing.amenities.maxVisitors} Visitors</div>`;
    }
    if (listing.amenities.kitchen) {
      amenitiesDiv.innerHTML += `<div class="flex items-center" title="Kitchen">${amenityIcons.kitchen} Kitchen</div>`;
    }
    if (listing.amenities.wifi) {
      amenitiesDiv.innerHTML += `<div class="flex items-center" title="WiFi">${amenityIcons.wifi} WiFi</div>`;
    }
    if (listing.amenities.tv) {
      amenitiesDiv.innerHTML += `<div class="flex items-center" title="TV">${amenityIcons.tv} TV</div>`;
    }
    if (listing.amenities.swimmingPool) {
      amenitiesDiv.innerHTML += `<div class="flex items-center" title="Swimming Pool">${amenityIcons.swimmingPool} Swimming Pool</div>`;
    }

    // Reviews
    const reviewsDiv = document.getElementById("modalReviews");
    reviewsDiv.innerHTML = `<h3 class="text-xl font-semibold mb-2">Reviews</h3>`;
    listing.reviews.forEach((rev) => {
      const reviewEl = document.createElement("div");
      reviewEl.classList.add("border-b", "border-gray-200", "pb-2");
      reviewEl.innerHTML = `
        <p class="font-semibold">${rev.author}</p>
        <p class="text-gray-700">${rev.text}</p>
      `;
      reviewsDiv.appendChild(reviewEl);
    });

    // Build gallery thumbnails vertical scroll
    const galleryThumbs = document.getElementById("galleryThumbnails");
    galleryThumbs.innerHTML = "";
    listing.images.forEach((img, i) => {
      const thumb = document.createElement("img");
      thumb.src = img;
      thumb.alt = `${listing.title} image ${i + 1}`;
      thumb.className = "w-full h-20 object-cover rounded cursor-pointer border border-gray-300 hover:border-red-600 transition";
      thumb.addEventListener("click", () => {
        mainSideImg.src = img;
        mainSideImg.alt = `${listing.title} image ${i + 1}`;
        document.getElementById("mainImage").src = img;
        document.getElementById("mainImage").alt = `${listing.title} image ${i + 1}`;
      });
      galleryThumbs.appendChild(thumb);
    });
  }

  function closeListingDetail() {
    document.getElementById("listingModal").style.display = "none";
    // Clear review form text on close
    document.getElementById("reviewText").value = "";
  }

  // Review form submission alert
  document.getElementById("reviewForm").addEventListener("submit", (e) => {
    e.preventDefault();
    alert("Only visitors who have been hosted here can leave a review.");
    // Reset textarea
    e.target.reset();
  });
</script>
</body>
</html>
